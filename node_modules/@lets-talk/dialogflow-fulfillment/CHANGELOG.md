# Change Log
All notable changes to this project will be documented in this file.


The format is based on [Keep a Changelog](http://keepachangelog.com/)
and this project adheres to [Semantic Versioning](http://semver.org/).


## Hotfix [1.6.3](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.6.3) - 2021-11-19
### Added
- Adding Coronavirus test

## Hotfix [1.6.2](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.6.2) - 2021-10-25
### Added
- Sequential requests to CPF API

## Hotfix [1.6.1](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.6.1) - 2021-10-18
### Added
- Make context-setting when out-of-office hour configurable, also for twilio provider

## Release [1.6.0](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.6.0) - 2021-10-18
### Added
- Add dynamic metadata when transfering conversations to LT
- Make context-setting when out-of-office hour configurable

## Release [1.5.0](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.5.0) - 2021-08-31
### Added
- WAST action (test to detect inter-family violence)
- includes senderInfo in transfering to lets talk

## Hotfix [1.4.1]
### Changed
- Avoid concurrent context setting

## Release [1.4.0](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.4.0) - 2021-06-07
### Added
- Pass rut and state of authentication to conversation metadata.

## Release [1.3.0](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.3.0) - 2021-05-31
### Changed
- Make constants in identity validaiton flow dynamic for generalisation
- different messages on failing the challenge vs error in the system
- Remove all dependencies on google's dialogflow agent

## Hotfix [1.2.1](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.2.1) - 2021-03-30
### Changed
- Change eventname to start validation flow

## Release [1.2.0](https://github.com/lets-talk/dialogflow-fulfillment/releases/tag/1.2.0) - 2021-03-24
### Added
- SOAP request to Sinacofi to check correctness of user's answers
- getContext method in dialogflow_service
- common provider-dependent addMessage action
- Compatibility of Sinacofi's identity validation service for web chat

### Changed
- Get contexts directly from request, not from dialogflow agent
- Replace all other actions taken by dialogflow agent by calls to APIs
- Fulfillment handler function does not take agent as input
- Deleted all occurrences of google's df agent

### Changed
- Always delegate fulfillment requests

## Release [1.1.0] - 2021-02-03
### Added
- Possibility to add extra metadata to payload of add-member-action

## Release [1.0.0] - 2021-01-28
### Added
- Allow for time dependence of group ids when transfering a conversation
- Enable tagging when closing a conversations
- Deploy package on push when tag "release" exists on commit
- Add custom integration for Normaliza: Payment Code
- Adding tag when transfer is rejected (for being out of office hours)
- Add payment codes to conversation metadata
- Actions to transfer conversation from twilio to LT
- Integration Tests Whatsapp Bot
- Payment codes must expire on or after current day
- sendMessage action for AdaptorexService
- Functionality to send requests and letting go.
- Delegate a fulfillment request
- Communication with Dialogflow API
- SOAP request to receive questions from sinacofi
- Bot-Action: Collect questions from sinacofi
- Bot-Action: Handle received answer in Identity confirmation
- Add system messages through Adaptorex
- Publishing Payment Codes delivered for Normaliza by Whatsapp to SNS
- Add Continous Deployment

### Changed
- Do not use timeout when making requests to CPF API
- More explicit handling of promises
- Using proper logging
- Generalised payment code logic for whatsapp bot
- Update Normaliza logic: Show special message if no debt exists.
- Use new Adaptorex payload structure
- Remove occurences of dialogflow-fulfillment-nodejs agent in normaliza payment code logic
- Remove occurences of dialogflow-fulfillment-nodejs agent in Twilio2LT transfer action
- Remove occurences of dialogflow-fulfillment-nodejs agent in CPF transfer action
