function getNested(obj, ...args) {
    return args.reduce((obj, level) => obj && obj[level], obj)
  }

function buildDelegationUrlFromRequest(request) {
  const headers = request.headers;
  const schema = headers["X-Forwarded-Proto"];
  const path = request.requestContext.path;
  const queryStringParameters = request.queryStringParameters;
  const strQueryStringParameters = Object.entries(queryStringParameters).map(([key, val]) => `${key}=${val}`).join('&');
  return `${schema}://${headers.Host}${path}?${strQueryStringParameters}`;
}

exports.getNested = getNested;
exports.buildDelegationUrlFromRequest = buildDelegationUrlFromRequest;