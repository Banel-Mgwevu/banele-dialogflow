const {createLogger, format, transports } = require("winston");
const { serviceName } = require("../constants");

const getLogger = (packageName) =>
  createLogger({
    level: process.env.NODE_ENV === "test" ? "off" : "debug",
    exitOnError: false,
    format: format.json(),
    defaultMeta: {
      environment: process.env.NODE_ENV,
      functionName: process.env.AWS_LAMBDA_FUNCTION_NAME,
      package: packageName,
      service: serviceName,
    },
    transports: [new transports.Console()],
  });

exports.getLogger = getLogger;
