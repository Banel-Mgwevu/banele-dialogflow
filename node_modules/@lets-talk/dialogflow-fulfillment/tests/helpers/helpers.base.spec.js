const helpers = require("./../../src/helpers/base");
const mockEvent = require("./../mocks/events/closeConversationMockEvent.json")

describe("build delegation url", () => {

    it("builds the expected url", () => {
        const url = helpers.buildDelegationUrlFromRequest(mockEvent);
        const itStartsWithTheRightUrl = url.startsWith('https://aaabbb.execute-api.us-west-1.amazonaws.com/Prod/integration?');
        expect(url).toBeTruthy();
        expect(url.includes('auth_token=abc123')).toBeTruthy();
        expect(url.includes('organization=project-p1')).toBeTruthy();
        expect(url.includes('integration=dialogflow_fulfillment')).toBeTruthy();
    })
})

